<!-- 12.1.1 -->
## Обзор документации

Как и в случае любых сложных действий, таких как устранение неполадок в сети, вам нужно будет начать с хорошей документации. Для эффективного мониторинга и устранения неполадок сетей требуется точная и полная сетевая документация.

Общая сетевая документация включает следующее:

* Схемы физической и логической топологии сети
* Документация по сетевому устройству, которая записывает всю необходимую информацию об устройстве
* Документация по базовым показателям производительности сети

Вся документация по сети должна храниться в отдельном месте (в виде бумажной копии) или в сети на защищенном сервере. Резервная документация должна поддерживаться и храниться в отдельном месте.

<!-- 12.1.2 -->
## Диаграммы топологии сети

На диаграммах топологии сети фиксируются местоположение, назначение и состояние устройств в сети. Существуют диаграммы топологии сети двух типов: физическая топология и логическая топология.

**Физическая топология**

Физическая топология сети описывает физическое расположение устройств, подключенных к сети. Для отладки на физическом уровне необходимо знать, каким образом устройства подключены друг к другу. Информация, записанная по физической топологии, обычно включает следующее:

* Имя устройства
* Расположение устройства (адрес, номер комнаты, расположение стойки)
* Используемые интерфейс и порты
* Тип кабеля

На рисунке приведен пример диаграммы физической топологии сети.

![](./assets/12.1.2-1.png)
<!-- /courses/ensa-dl/ae8eb396-34fd-11eb-ba19-f1886492e0e4/aeb638ca-34fd-11eb-ba19-f1886492e0e4/assets/c6e61f82-1c46-11ea-af56-e368b99e9723.svg -->

<!--
На диаграмме показана топология физической сети с различным оборудованием, расположенным в трех разных местоположениях/проводных шкафах. Есть три взаимосвязанных маршрутизатора, по одному в каждом местоположении, и подключение к облаку Интернета. В верхней части диаграммы находится Главный офис (корпус A) Rm: 107 - Проводка Шкаф 1. Он содержит центральный маршрутизатор, установленный на стойке 1 полка 1, и сервер Svr1. Центральный маршрутизатор имеет четыре подключения. Он подключен слева через интерфейс G0/0/0 к Svr1, установленный на стойке 2 полки 1. Central подключен справа через канал Ethernet метро на интерфейсе G0/1/0 к маршрутизатору ISP, в облаке Интернета. Также в облаке находится Svr2, веб-сервер, размещенный на ISP. Центральная сеть подключается через интерфейс G0/0/1 к G0/0/1 на маршрутизаторе Branch-1, расположенном в области исследований и разработок (корпус B) Rm: 137 - Wiring Closet 2 в левом нижнем углу схемы. Филиал-1 монтируется на стойку 2 полки 1 и имеет подключение через G0/0/0 для переключения S1 на порт G0/1. S1 устанавливается на стойку 2 полки 2 и имеет подключение через Fa0/5 к хосту PC1 в Rm 1307. S1 имеет два соединения для переключателя S2, который установлен на стеллаже 2 полки 3. Они подключаются через Fa0/1 к Fa0/1 и Fa0/2 к Fa0/2. S2 имеет подключение через Fa0/5 к хосту PC2 в Rm 1305. Последним соединением с центральным маршрутизатором является последовательное подключение через S0/1/1 к маршрутизатору Branch-2 S0/1/1, расположенному в удаленном офисе продаж Rm: 7 - Wiring Closet 3 в правом нижнем углу схемы. Ветка-2 монтируется на стойке 1 Полка 1. Он имеет подключение через G0/0/0 для переключения S3 на порт G0/1. S3 устанавливается на стойку 1 полки 2 и подключается через Fa0/5 для размещения PC3 в конференц-зале.
-->

**Логическая топология IPv4**

Диаграммы логической сетевой топологии отображают логическое подключение устройств к сети. Это относится к тому, как устройства передают данные по сети при взаимодействии с другими устройствами. Для обозначения сетевых элементов, например маршрутизаторов, серверов, компьютеров, концентраторов сетей VPN и устройств обеспечения безопасности, используются условные обозначения (символы). Кроме того, могут быть показаны подключения между несколькими узлами, но они не представляют собой реальных физических местоположений.

Информация, записанная по физической топологии, обычно включает следующее:

* идентификаторы устройств;
* IP-адрес и длина префиксов;
* идентификаторы интерфейсов;
* протоколы маршрутизации и статические маршруты;
* Информация уровня 2 (например, VLAN, магистрали, EtherChannels)

На рисунке приведен пример логической топологии сети IPv4.

![](./assets/12.1.2-2.png)
<!-- /courses/ensa-dl/ae8eb396-34fd-11eb-ba19-f1886492e0e4/aeb638ca-34fd-11eb-ba19-f1886492e0e4/assets/c6e6bbc2-1c46-11ea-af56-e368b99e9723.svg -->

<!--
На диаграмме показана логическая топология сети с различным оборудованием, связанной IPv4 адресацией и информацией уровня 2. Есть три взаимосвязанных маршрутизатора и подключение к облаку Интернета. В верхней части диаграммы находится центральный маршрутизатор, который имеет четыре соединения. Он подключен слева к сети 10.0.0.0/30 через интерфейс G0/0/0, адрес .1, к серверу Svr1, адрес .2. Центральный подключен справа к сети 209.165.200.224/30 через G0/1/0, адрес .226, к маршрутизатору ISP, в облаке Интернета по адресу .225. Также в облаке находится Svr2 по адресу 209.165.201.10. Центральный канал подключается в левом нижнем углу к сети 10.1.1.0/30 через интерфейс G0/0/1, адрес .1, к маршрутизатору Branch-1 по адресу G0/0/1, адрес .2. Branch-1 подключается через магистральный канал на G0/0/0 для переключения S1 на порт G0/1. S1 имеет IP-адрес 192.168.77.2 и имеет подключение через Fa0/5 к узлу PC1 по адресу 192.168.10.10. S1 имеет два соединения, образующие EtherChannel Po1 для коммутатора S2. Они подключаются через Fa0/1 к Fa0/1 и Fa0/2 к Fa0/2. S2 имеет IP-адрес 192.168.77.3 и имеет подключение через Fa0/5 к узлу PC2 по адресу 192.168.20.10. В таблице показана следующая конфигурация VLAN для расположения Branch-1: VLAN 10, имя LAN-1, сеть 192.168.10.0/24: VLAN 20, имя LAN-2, сеть 192.168.20.0/24; VLAN 77, управление именем, сеть 192.168.77.0/24; VLAN 99, имя Native; и VLAN 999, имя Unused. Последним соединением центрального маршрутизатора является последовательное соединение в правом нижнем углу к сети 10.2.2.0/30 через S0/1/1, адрес .1, к маршрутизатору Branch-2 S0/1/1, адрес .2. Бранч-2 имеет подключение к сети 192.168.30.0/24 через G0/0/0, адрес .1, к коммутатору S3 на порту G0/1. S3 подключается через Fa0/5 к хосту PC3 по адресу .10.
-->

**Логическая топология IPv6**

Несмотря на то, что IPv6-адреса также могут отображаться на диаграмме данной топологии, для более четкого представления может оказаться целесообразным создание отдельной диаграммы логической топологии сети IPv6.

На рисунке показан пример логической топологии IPv6.

![](./assets/12.1.2-3.png)
<!-- /courses/ensa-dl/ae8eb396-34fd-11eb-ba19-f1886492e0e4/aeb638ca-34fd-11eb-ba19-f1886492e0e4/assets/c6e709e2-1c46-11ea-af56-e368b99e9723.svg -->

<!--
На диаграмме показана логическая топология сети с различным оборудованием, связанной IPv6 адресацией и информацией уровня 2. Есть три взаимосвязанных маршрутизатора и подключение к облаку Интернета. В верхней части диаграммы находится центральный маршрутизатор, который имеет четыре соединения. Он подключен слева к сети 2001:db8:acad:1::/64 через интерфейс G0/0/0, адрес :1, к серверу Svr1, адрес :2. Центральный подключен справа к сети 2001:db8:feed:1::/64 через G0/1/0, адрес :226, к маршрутизатору, ISP, в облаке Интернета по адресу :225. Также в облаке находится Svr2 по адресу 2001:db8:feed:1::10/64. Central подключается в левом нижнем углу к сети 10.1.1.0/30 (ИСПРАВИТЬ ПРИ ОБНОВЛЕНИИ ДИАГРАММА) через интерфейс G0/0/1, адрес .1 (ИСПРАВИТЬ ПРИ ОБНОВЛЕНИИ ДИАГРАММА), к маршрутизатору Branch-1 по адресу G0/0/1, адрес .2 (ИСПРАВЛЕНИЕ ПРИ ОБНОВЛЕНИИ ДИАГРАММА). Branch-1 подключается к сети LAN 2 2001:db8:acad:2: :/64 через магистральный канал на G0/0/0 для переключения S1 на порт G0/1. S1 имеет два соединения, образующие EtherChannel Po1 для коммутатора S2. Они подключаются через Fa0/1 к Fa0/1 и Fa0/2 к Fa0/2. S2 имеет подключение через Fa0/5 к хосту PC2. Последним соединением центрального маршрутизатора является последовательное соединение в правом нижнем углу сети 2001:db8:acad:2::/64 через S0/1/1, адрес :1, к маршрутизатору Branch-2 S0/1/1, адрес :2. Branch-2 имеет подключение к сети LAN 3 2001:db8:acad:3::/64 через G0/0/0, адрес :1, для переключения S3 на порт G0/1. S3 имеет адрес :2 и подключен через Fa0/5 к хосту PC3 по адресу :10.
-->

<!-- 12.1.3 -->
## Документация по сетевым устройствам

В файлах настройки сети содержатся точные, актуальные записи об оборудовании и программном обеспечении, применяемом в сети. Документация должна содержать всю необходимую информацию о сетевых устройствах.

Многие организации создают документы с таблицами или электронными таблицами для сбора соответствующей информации об устройствах.

**Документация по маршрутизатору**

В таблице приведен пример документации по сетевым устройствам для двух взаимосвязанных маршрутизаторов.

<table>
  <tr>
    <td><b>Устройство</b></td>
    <td><b>Модель</b></td>
    <td><b>Описание</b></td>
    <td><b>Местоположение</b></td>
    <td colspan="2"><b>IOS</b></td>
    <td><b>Лицензия</b></td>
  </tr>
  <tr>
    <td><b>Центральный офис</b></td>
    <td>ISR 4321 </td>
    <td>Центральный пограничный маршрутизатор</td>
    <td>Здание A Rm: 137</td>
    <td colspan="2">Cisco IOS XE Software, Version 16.09.04 flash:isr4300-universalk9_ias.16.09.04.SPA.bin</td>
    <td>ipbasek9 securityk9</td>
  </tr>
  <tr>
    <td><b>Интерфейс</b></td>
    <td colspan="2"><b>Описание</b></td>
    <td><b>IPv4-адрес</b></td>
    <td><b>Адрес IPv6</b</td>
    <td><b>MAC-адрес</b></td>
    <td><b>Маршрутизация</b></td>
  </tr>
  <tr>
    <td>G0/0/0</td>
    <td colspan="2">Подключается к SVR-1</td>
    <td>10.0.0.1/30</td>
    <td>2001:db8:acad:1።1/64</td>
    <td>a03d.6fe1.e180</td>
    <td>OSPF</td>
  </tr>
  <tr>
    <td>G0/0/1</td>
    <td colspan="2">Подключается к Branch-1</td>
    <td>10.1.1.1/30</td>
    <td>2001:db8:acad:a001::1/64</td>
    <td>a03d.6fe1.e181</td>
    <td>OSPFv3</td>
  </tr>
  <tr>
    <td>G0/1/0</td>
    <td colspan="2">Подключение к интернет-провайдеру</td>
    <td>209.165.200.226/30</td>
    <td>2001:db8:feed:1::2/64</td>
    <td>a03d.6fc3.a132</td>
    <td>По умолчанию</td>
  </tr>
  <tr>
    <td>S0/1/1</td>
    <td colspan="2">Подключается к Branch-2</td>
    <td>10.1.1.2/24</td>
    <td>2001:db8:acad:2።1/64</td>
    <td>Н/Д (недоступно)</td>
    <td>OSPFv3</td>
  </tr>
  <tr>
    <td><b>Устройство</b></td>
    <td><b>Модель</b></td>
    <td><b>Описание</b></td>
    <td><b>Узел</b></td>
    <td colspan="2"><b>IOS</b></td>
    <td><b>Лицензия</b></td>
  </tr>
  <tr>
    <td><b>Branch-1</b></td>
    <td>ISR 4221</td>
    <td>Пограничный маршрутизатор Branch-2</td>
    <td>Здание B Rm: 107</td>
    <td colspan="2">Cisco IOS XE Software, Version 16.09.04 flash:isr4200-universalk9.16.09.04.SPA.bin</td>
    <td>ipbasek9 securityk9</td>
  </tr>
  <tr >
    <td><b>Интерфейс</b></td>
    <td colspan="2"><b>Описание</b></td>
    <td><b>IPv4-адрес</b></td>
    <td><b>Адрес IPv6</b></td>
    <td><b>MAC-адрес</b></td>
    <td><b>Маршрутизация</b></td>
  </tr>
  <tr>
    <td>G0/0/0</td>
    <td colspan="2">Подключается к S1</td>
    <td>Конфигурация ROS (Router-on-a-stick)</td>
    <td>Конфигурация ROS (Router-on-a-stick)</td>
    <td>a03d.6fe1.9d90</td>
    <td>OSPF</td>
  </tr>
  <tr>
    <td>G0/0/1</td>
    <td colspan="2">Подключение к Central</td>
    <td>10.1.1.2/30</td>
    <td>2001:db8:acad:a001::2/64</td>
    <td>a03d.6fe1.9d91</td>
    <td>OSPF</td>
  </tr>
</table>

**Документация по устройствам коммутатора LAN**

В этой таблице приведен пример документации устройства для коммутатора LAN.

<table>
  <tr>
    <td><b>Устройство</b></td>
    <td><b>Модель</b></td>
    <td><b>Описание</b></td>
    <td colspan="2"><b>Управление IP-адрес</b></td>
    <td colspan="4"><b>IOS</b></td>
    <td colspan="3"><b>VTP</b></td>
  </tr>
  <tr>
    <td><b>S1</b></td>
    <td>Cisco Catalyst WS-C2960-24TC-L </td>
    <td>Branch-1 коммутатор LAN1</td>
    <td colspan="2">192.168.77.2/24</td>
    <td colspan="4">IOS: 15.0 (2) image SE7: C2960-LANBASEK9-M</td>
    <td colspan="3">Domain: CCNA Mode: Server</td>
  </tr>
  <tr >
    <td><b>Порт</b></td>
    <td colspan="2"><b>Описание</b></td>
    <td><b>Доступ</b></td>
    <td colspan="2"><b>VLAN</b></td>
    <td><b>Trunk</b></td>
    <td><b>EtherChannel</b></td>
    <td colspan="2"><b>Собственная </b></td>
    <td><b>Включено</b></td>
  </tr>
  <tr>
    <td>Fa0/1</td>
    <td colspan="2">Port Channel 1 транк до S2 Fa0/1</td>
    <td>-</td>
    <td colspan="2">-</td>
    <td>Да</td>
    <td>Port-channel 1</td>
    <td colspan="2">99</td>
    <td colspan="2">Да</td>
  </tr>
  <tr>
    <td>Fa0/2</td>
    <td colspan="2">Port Channel 1 транк до S2 Fa0/2</td>
    <td>-</td>
    <td colspan="2">-</td>
    <td>Да</td>
    <td>Port-channel 1</td>
    <td colspan="2">99</td>
    <td colspan="2">Да</td>
  </tr>
  <tr>
    <td>Fa0/3</td>
    <td colspan="2">*** Not in use ***</td>
    <td>Да</td>
    <td colspan="2">999</td>
    <td>-</td>
    <td>-</td>
    <td colspan="2"></td>
    <td colspan="2">Shut</td>
  </tr>
  <tr>
    <td>Fa0/4</td>
    <td colspan="2">*** Not in use ***</td>
    <td>Да</td>
    <td colspan="2">999</td>
    <td>-</td>
    <td>-</td>
    <td colspan="2"></td>
    <td colspan="2">Shut</td>
  </tr>
  <tr>
    <td>Fa0/5</td>
    <td colspan="2">Порт доступа для пользователей</td>
    <td>Да</td>
    <td colspan="2">10</td>
    <td>-</td>
    <td>-</td>
    <td colspan="2"></td>
    <td colspan="2">Да</td>
  </tr>
  <tr>
    <td>…</td>
    <td colspan="2"></td>
    <td></td>
    <td colspan="2"></td>
    <td>-</td>
    <td>-</td>
    <td colspan="2"></td>
    <td colspan="2">-</td>
  </tr>
  <tr>
    <td>Fa0/24</td>
    <td colspan="2">Порт доступа для пользователей</td>
    <td>Да</td>
    <td colspan="2">20</td>
    <td>-</td>
    <td>-</td>
    <td colspan="2"></td>
    <td colspan="2">Да</td>
  </tr>
  <tr>
    <td>Fa0/24</td>
    <td colspan="2">*** Not in use ***</td>
    <td>Да</td>
    <td colspan="2">999</td>
    <td>-</td>
    <td>-</td>
    <td colspan="2"></td>
    <td colspan="2">Shut</td>
  </tr>
  <tr>
    <td>G0/1</td>
    <td colspan="2">Транк до Branch-1</td>
    <td>-</td>
    <td colspan="2">-</td>
    <td>Да</td>
    <td>-</td>
    <td colspan="2">99</td>
    <td colspan="2">Да</td>
  </tr>
  <tr>
    <td>G0/2</td>
    <td colspan="2">*** Not in use ***</td>
    <td>Да</td>
    <td colspan="2">999</td>
    <td></td>
    <td>-</td>
    <td colspan="2"></td>
    <td colspan="2"></td>
  </tr>
</table>

**Документация по конечной системе**

Документация конечной системы посвящена аппаратному и программному обеспечению, используемому на серверах, консолях управления сетью и пользовательских рабочих станциях. Если конечная система настроена неправильно, это может оказать отрицательное воздействие на общую производительность сети. По этой причине доступ к документации по устройствам конечной системы может быть очень полезным при устранении неполадок.

В этой таблице приведен пример информации, которая может быть записана в документ конечного устройства системы.

<table>
  <tr>
    <td><b>Устройство</b></td>
    <td><b>ОС</b></td>
    <td><b>Сервисы</b></td>
    <td><b>MAC-адрес</b></td>
    <td><b>IPv4 / IPv6 адресация</b></td>
    <td><b>Шлюз по умолчанию</b></td>
    <td><b>DNS</b></td>
  </tr>
  <tr>
    <td rowspan="2"><b>SRV1</b></td>
    <td rowspan="2">Сервер MS 2016</td>
    <td rowspan="2">SMTP, POP3, файловые службы, DHCP</td>
    <td rowspan="2">5475.d08e.9ad8</td>
    <td>10.0.0.2/30</td>
    <td>10.0.0.1</td>
    <td>10.0.0.1</td>
  </tr>
  <tr>
    <td>2001:db8:acad:1::2/64</td>
    <td>2001:db8:acad:1።1</td>
    <td>2001:db8:acad:1።1</td>
  </tr>
  <tr>
    <td rowspan="2"><b>SRV2</b></td>
    <td rowspan="2">Сервер MS 2016</td>
    <td rowspan="2">HTTP, HTTPS</td>
    <td rowspan="2">5475.d07a.5312</td>
    <td>209.165.201.10</td>
    <td>209.165.201.1</td>
    <td>209.165.201.1</td>
  </tr>
  <tr>
    <td>2001:db8:feed:1::10/64</td>
    <td>2001:db8:feed:1::1</td>
    <td>2001:db8:feed:1::1</td>
  </tr>
  <tr>
    <td rowspan="2"><b>PC1</b></td>
    <td rowspan="2">0MS Windows 10</td>
    <td rowspan="2">HTTP, HTTPS</td>
    <td rowspan="2">5475.d017.3133</td>
    <td>192.168.10.10/24</td>
    <td>192.168.10.1</td>
    <td>192.168.10.1</td>
  </tr>
  <tr>
    <td>2001:db8:acad:1::251/64</td>
    <td>2001:db8:acad:1።1</td>
    <td>2001:db8:acad:1።1</td>
  </tr>
  <tr>
    <td><b>…</b></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table>

<!-- 12.1.4 -->
## Формирование базовых показателей сети

Целью наблюдения за сетью является отслеживание уровня производительности сети и его сравнение с ранее определенными базовыми показателями. Базовый уровень используется для установления нормальной производительности сети или системы для определения «личности» сети в нормальных условиях.

Для формирования базового уровня производительности сети требуется сбор данных о производительности, поступающих из портов и устройств, необходимых для обеспечения работы сети.

Базовый показатель сети должен ответить на следующие вопросы:

* Как сеть работает в течение обычного (среднего) дня?
* Где происходит большинство ошибок?
* Какая часть сети используется наиболее интенсивно?
* Какая часть сети используется в наименьшей степени?
* Какие устройства необходимо отслеживать и какие пределы нужно установить?
* Может ли сеть поддерживать определенные политики?

Благодаря измерению начального уровня производительности и эксплуатационной готовности наиболее важных сетевых устройств и каналов сетевые администраторы могут определить разницу между аномальным поведением и нормальным функционированием сети при расширении сети или изменении моделей трафика. Базовые показатели также позволяют понять, может ли текущая схема сети удовлетворять требованиям бизнеса. Если базовые показатели отсутствуют, то нет никакого стандарта для определения оптимальных уровней сетевого трафика и уровней загруженности.

Анализ, выполняемый после определения исходных базовых показателей, также позволяет обнаружить скрытые проблемы. Собранные данные позволяют увидеть истинные причины реального или потенциального затора в сети. Эти данные также могут позволить определить участки сети, которые используются неэффективно и довольно часто могут привести к перепроектированию сети с учетом показателей качества и пропускной способности.

Базовый показатель производительности сети устанавливает основу для измерения эффекта от модификаций сети и последующих мер по поиску и устранению неполадок. Поэтому важно внимательно подойти к его формированию.

<!-- 12.1.5 -->
## Шаг 1. Определите типы данных, которые необходимо собирать.

При определении начальных базовых показателей начните с выбора нескольких переменных, которые представляют определенные политики. В случае выбора слишком большого количества точек данных объем собираемой информации может оказаться крайне большим, что очень усложнит процесс анализа собранных данных. Начните с самого простого и постепенно вносите изменения по ходу работы. На начальном этапе рекомендуется начать с определения коэффициента использования интерфейсов и ЦП.

<!-- 12.1.6 -->
## Шаг 2. Определите требуемые устройства и порты.

Для определения устройств и портов, на которых необходимо измерять данные о производительности, следует использовать топологию сети. К требуемым устройствам и портам относятся:

* порты сетевых устройств, которые подключаются к другим сетевым устройствам;
* серверы
* основные пользователи;
* любые другие объекты, наиболее важные для эксплуатации.

Логическая диаграмма топологии сети может быть полезна при определении основных устройств и портов, подлежащих наблюдению. Например, на рисунке сетевой администратор выделил те устройства и порты, за которыми нужно наблюдать в ходе тестирования базовых показателей.

![](./assets/12.1.6.png)
<!-- /courses/ensa-dl/ae8eb396-34fd-11eb-ba19-f1886492e0e4/aeb638ca-34fd-11eb-ba19-f1886492e0e4/assets/c6e81b53-1c46-11ea-af56-e368b99e9723.svg -->

<!--
Диаграмма представляет собой логическую сеть IPv4, описанную в 12.1.2-2, с добавлением выделенных портов/интерфейсов и устройств, представляющих интерес.  Выделены устройства Svr1, Svr2 и PC1. Выделенные порты/интерфейсы: Central G0/0/0, G0/1/0 и S0/1/1; Branch-1 G0/0/1 и G0/0; S1 G0/1, Fa0/1, Fa0/2 и Fa0/5; и Branch-2 S0/1/1 и G0/0.
-->

Интересующие устройства включают PC1 (терминал администратора) и два сервера (то есть Srv1 и Svr2). К числу портов, представляющих интерес, как правило, относятся интерфейсы маршрутизатора и ключевые порты коммутаторов.

Благодаря сокращению списка опрашиваемых портов можно оптимизировать получаемые результаты и уменьшить нагрузку по управлению сетями. Следует помнить, что интерфейс на маршрутизаторе или коммутаторе может быть виртуальным, например виртуальный интерфейс коммутатора (SVI).

<!-- 12.1.7 -->
## Шаг 3. Определите длительность сбора базовых показателей

Интервала времени, а также объема собираемых сведений о базовых показателях должно быть достаточно для формирования типичной картины сети. Крайне важно наблюдать за ежедневными тенденциями сетевого трафика. Также важно наблюдать за тенденциями за более длительный период времени, например за неделю или за месяц. По этой причине при сборе данных для последующего анализа указанный период должен составлять как минимум 7 дней.

На рис. 2 приведены примеры нескольких снимков экранов с тенденциями уровня использования ЦП (соответственно, за день, неделю, месяц и год).

![](./assets/12.1.7.png)
<!-- /courses/ensa-dl/ae8eb396-34fd-11eb-ba19-f1886492e0e4/aeb638ca-34fd-11eb-ba19-f1886492e0e4/assets/c6e86973-1c46-11ea-af56-e368b99e9723.svg -->

<!--
скриншоты графиков загрузки ЦП, снятые за ежедневный, недельный, месячный и годовой период, показывающие максимальную загрузку ЦП
-->

Применительно к этому примеру следует отметить, что тенденции за рабочую неделю являются слишком короткими, чтобы показать регулярный скачок нагрузки, происходящий на каждых выходных вечером в субботу, когда выполняется процесс резервного копирования базы данных, для которого требуется существенная пропускная способность сети. Эта повторяющаяся форма диаграммы появляется в месячной тенденции. Годовая тенденция, как показано в примере, может быть слишком протяженной и не давать полезную информацию о базовых показателях производительности. Однако такая тенденция поможет определить долгосрочное поведение, которые нужно будет проанализировать позже.

Обычно определение базовых показателей должно продолжаться не более 6 недель (если не потребуется определение специальных долгосрочных тенденций). Как правило, для определения базовых показателей достаточным будет период длительностью от 2-х до 4-х недель.

Измерение базовых показателей не следует выполнять в периоды, когда в сети есть уникальные образцы трафика, так как в этом случае результаты измерения не будут точно отражать нормальную работу сети. Выполняйте ежегодный анализ всей сети или базовых показателей отдельных ее частей поочередно. Анализ необходимо выполнять регулярно, чтобы узнать, какое влияние на сеть оказывают ее рост, а также другие изменения.

<!-- 12.1.8 -->
## Измерение данных

При документировании сети часто приходится собирать информацию прямо из маршрутизаторов и коммутаторов. К полезным командам документирования сети безусловно относятся команды **ping**, **traceroute** и **telnet**, а также следующие команды **show**:

На рисунке указаны некоторые наиболее часто используемые команды ОС IOS Cisco, применяемые для сбора данных.

| **Команда** | **Описание** |
| --- | --- |
| `show version` | Позволяет отобразить время безотказной работы, информацию о версиях для оборудования и программного обеспечения устройства |
| `show ip interface [brief]`<br>`show ipv6 interface [brief]` | <ul><li>Позволяет отобразить все параметры настройки, установленные на интерфейсе.</li><li>Используйте ключевое слово **brief** для отображения только вверх/вниз состояние IP-интерфейсов и IP-адрес каждого интерфейса.</li></ul> |
| `show interfaces ` | <ul><li>Позволяет отобразить подробные выходные данные для каждого интерфейса. </li><li>Чтобы отобразить подробные выходные данные только для одного интерфейса, включите тип интерфейса и номер в команде (например, Gigabit Ethernet 0/0/0).</li></ul> |
| `show ip route`<br>`show ipv6 route ` | <ul><li>Отображение списка содержимого таблицы маршрутизации, подключенного напрямую и узнал удаленные сети.</li><li>Добавить **static**, **eigrp** или **ospf** для отображения только этих маршрутов.</li></ul> |
| `show cdp neighbors detail` | Отображает подробные сведения о напрямую подключенном соседе Cisco Meraki. |
| `show arp`<br>`show ipv6 neighbors` | Позволяет отобразить содержимое таблицы ARP (IPv4) и таблицы соседних устройств (IPv6). |
| `show running-config` | Отобразите текущую конфигурацию. |
| `show vlan` | Отобразите состояние сетей VLAN в коммутаторе. |
| `show port` | Отобразите состояние портов на коммутаторе. |
| `show tech-support` | <ul><li>Данную команду удобно использовать для сбора значительного объема сведений об устройстве для устранения неполадок. </li><li>Выполняя несколько команд show, которые могут быть предоставлены представителями технической поддержки при сообщении о проблеме</li></ul> |

Процесс сбора данных вручную с помощью команд **show** на отдельных сетевых устройствах занимает очень много времени и не является масштабируемым решением. Данный режим (сбора данных вручную) следует использовать для небольших сетей или только для критически важных сетевых устройств. В простых сетях для выполнения задач определения базовых показателей обычно используется сочетание сбора данных вручную и простых анализаторов сетевых протоколов.

В высокотехнологичных сетях базовые показатели обычно определяются с помощью ПО для управления сетью. Эти программные пакеты позволяют администраторам автоматически создавать и просматривать отчеты, сравнивать текущие уровни производительности с историческими данными, автоматически определять проблемы с производительностью и создавать оповещения для приложений, которые не удовлетворяют ожидаемым уровням обслуживания.

Формирование начальных базовых показателей или проведения анализа на основе наблюдения за производительностью может оказаться довольно длительным (несколько часов или дней), если предполагается получить точные цифры об уровне производительности сети. Во многих случаях в течение процесса сбора данных ПО для управления сетями или анализаторы протоколов и пакетов функционируют непрерывно.

<!-- 12.1.9 -->
<!-- quiz -->

