<!-- 12.6.1 -->
## Packet Tracer. Поиск и устранение неполадок. Документирование сети

В этом задании Packet Tracer вы задокументируете неизвестную вам сеть.

* Проверка сетевого подключения
* Компиляция информации об адресации узла.
* Удаленный доступ к устройствам шлюза по умолчанию.
* Документирование конфигураций устройств шлюза по умолчанию.
* Обнаружение устройств в сети.
* Составление топологии сети

[Поиск и устранение неполадок (pdf)](./assets/12.6.1-packet-tracer---troubleshooting-challenge---document-the-network.pdf)

[Поиск и устранение неполадок (pka)](./assets/12.6.1-packet-tracer---troubleshooting-challenge---document-the-network.pka)

<!-- 12.6.2 -->
## Packet Tracer. Поиск и устранение неполадок. Использование документации для решения проблем

В этом задании используется сетевая документация для выявления и устранения проблем с сетевыми связями.

* Используйте различные методы и инструменты для выявления проблем с подключением.
* Используйте документацию для руководства по поиску и устранению неисправностей.
* Определение конкретных сетевых проблем.
* Внедрение решений проблем связи с сетью.
* Проверьте работу сети.

[Поиск и устранение неполадок (pdf)](./assets/12.6.2-packet-tracer---troubleshooting-challenge---use-documentation-to-solve-issues.pdf)

[Поиск и устранение неполадок (pka)](./assets/12.6.2-packet-tracer---troubleshooting-challenge---use-documentation-to-solve-issues.pka)

<!-- 12.6.3 -->
##  Что я изучил в этом модуле?

**Документация по сети**

Общая сетевая документация включает в себя: физические и логические топологии сети, документацию по сетевым устройствам, записывающую всю необходимую информацию об устройстве, а также документацию по базовой производительности сети. Информация, найденная в физической топологии, обычно включает имя устройства, местоположение устройства (адрес, номер комнаты, расположение стойки и т.д.), используемые интерфейсы и порты, а также тип кабеля. Документация по сетевому устройству для маршрутизатора может включать интерфейс, адрес IPv4, адрес IPv6, MAC-адрес и протокол маршрутизации. Документация по сетевому устройству для коммутатора может включать порт, доступ, VLAN, магистраль, EtherChannel, собственный и включенный. Документация по сетевым устройствам для конечных систем может включать имя устройства, ОС, службы, MAC-адрес, адреса IPv4 и IPv6, шлюз по умолчанию и DNS. Базовый показатель сети должен ответить на следующие вопросы:

* Как сеть работает в течение обычного (среднего) дня?
* Где происходит большинство ошибок?
* Какая часть сети используется наиболее интенсивно?
* Какая часть сети используется в наименьшей степени?
* Какие устройства необходимо отслеживать и какие пределы нужно установить?
* Может ли сеть поддерживать определенные политики?

При создании первоначального  базового уровня начните с выбора нескольких переменных, которые представляют определенные политики, такие как использование интерфейса и загрузка ЦП. Логическая диаграмма топологии сети может быть полезна при определении основных устройств и портов, подлежащих наблюдению. Интервала времени, а также объема собираемых сведений о базовых показателях должно быть достаточно для формирования типичной картины сети. При документировании сети необходимо собирать информацию прямо из маршрутизаторов и коммутаторов используя команды **show**, **ping**, **traceroute** и **telnet**.

**Процедура поиска и устранения неполадок**

Процесс устранения неполадок должен быть ориентирован на структурированные методы. Одним из методов является семиэтапный процесс устранения неполадок: 1. Определите проблему, 2. Сбор информации, 3 Анализ информации, 4 Устранить возможные причины, 5. Предложить гипотезу, 6. Тестовые гипотезы, и 7. Решение проблемы Когда вы общаетесь с конечными пользователями о своих сетевых проблемах, задавайте как открытые, так и закрытые вопросы. Используйте  команды **show**, **ping**, **traceroute** и **telnet** для сбора информации с устройств. Используйте многоуровневые модели для устранения неполадок «снизу вверх», «сверху вниз» или «разделяй и властвуй». Другие модели включают следующие пути, замену, сравнение и образованные догадки. Проблемы программного обеспечения часто решаются с помощью нисходящего подхода, в то время как аппаратные проблемы решаются с помощью подхода снизу вверх. Новые проблемы могут быть решены опытным техническим специалистом по методу «разделяй и властвуй».

**Инструменты для поиска и устранения неполадок**

Общие средства устранения неполадок программного обеспечения включают инструменты NMS, базы знаний и базовые инструменты. Анализатор протокола, такой как Wireshark, декодирует различные уровни протокола в записанном кадре и представляет эту информацию в удобном для использования формате. В число средств поиска и устранения неполадок аппаратного обеспечения входят NAM, цифровые мультиметры, тестеры кабелей, анализаторы кабелей и портативные анализаторы сетей. Сервер Syslog также может быть использован в качестве средства устранения неполадок. Реализация средства ведения журнала для устранения неполадок сети. Устройства Cisco могут регистрировать информацию об изменении настройки, нарушениях списков контроля доступа, состоянии интерфейсов и разнообразных событиях другого типа. Сообщения о событиях могут отправляться на одну или несколько из следующих параметров: консоль, терминальные линии, буферизированное ведение журнала, SNMP-ловушки и системный журнал. Чем меньше номер уровня, тем выше уровень серьезности. Команда **logging trap** _level_ позволяет ограничивать сообщения, отправляемые на сервер Syslog, на основе уровня важности. Уровень - это имя или номер уровня серьезности. Регистрируются только сообщения, равные или численно ниже указанного уровня.

**Симптомы и причины проблем с сетью**

Сбои и не оптимальные условия на физическом уровне обычно приводят к отключению сетей. Сетевые администраторы должны иметь возможность эффективно изолировать и устранять проблемы на этом уровне. Симптомы включают производительность ниже базового уровня, потерю подключения, перегрузку, высокую загрузку ЦП и сообщения об ошибках консоли. Причины, как правило, связаны с питанием, аппаратными сбоями, неисправностями кабелей, затуханием, шумом, ошибками конфигурации интерфейса, превышением пределов конструкции компонентов и перегрузкой ЦП.

Проблемы на уровне 2 имеют отличительные признаки, которые в случае их обнаружения позволят оперативно выявить проблему. Симптомы включают отсутствие функциональности/возможности подключения на уровне 2 или выше, сеть работает ниже базовых уровней, чрезмерное вещание и сообщения с консоли. Причинами обычно являются ошибки инкапсуляции, ошибки сопоставления адресов, ошибки кадрирования и сбои или петли STP.

К проблемам сетевого уровня относятся любые проблемы, в которых участвуют протоколы уровня 3 — как маршрутизируемые протоколы (например IPv4 или IPv6), так и протоколы маршрутизации (например, EIGRP, OSPF и т. д.). Симптомы включают сбой сети и неоптимальную производительность. Причинами обычно являются общие проблемы с сетью, проблемы с подключением, проблемы с таблицей маршрутизации, проблемы с соседями и база данных топологии.

Сетевые проблемы могут возникать вследствие проблем транспортного уровня на маршрутизаторе, особенно на границе сети, где выполняется анализ и изменение трафика. Симптомы включают проблемы с подключением и доступом. Причины могут быть неправильно настроены NAT или ACL. Неправильно конфигурирование ACL обычно происходит при выборе потока трафика, порядке записей контроля доступа, неявном запрете любого, адресах и шаблоных масках IPv4, выборе протокола транспортного уровня, портов источника и назначения, использовании установленного ключевого слова и необычных протоколов. Существует несколько проблем с NAT, включая неправильные настройки NAT внутри, NAT снаружи или ACL. Общие области взаимодействия с NAT включают протоколы BOOTP и DHCP, DNS, SNMP, туннелирования и шифрования.

Проблема на уровне приложений может привести к недоступности или невозможности использования ресурсов (хотя физический, канальный, сетевой и транспортный уровни работают нормально). Сеть может быть полностью работоспособна с точки зрения связи, но приложение не может обеспечивать данные. Проблемы другого типа на уровне приложений происходят, когда физический, канальный, сетевой и транспортный уровни функционируют нормально, но передача данных и запросы сетевых услуг из службы или приложения не соответствуют обычным ожиданиям пользователя.

**Поиск и устранение неполадок с IP-подключениями**

Диагностика и устранение проблем представляют собой одну из самых главных задач для сетевых администраторов. Применительно к поиску и устранению проблем единого рецепта устранения неполадок не существует, а для диагностики конкретной проблемы можно использовать различные способы. Однако благодаря применению структурированного подхода к процессу устранения неполадок администратор может сократить время, необходимое для диагностики и устранения проблемы.

Проблема со связью между конечными устройствами приводит к поиску и устранению неполадок Две наиболее распространенные утилиты, используемые для проверки проблемы с сквозным подключением, являются **ping** и **traceroute.** Команда **ping** использует протокол уровня 3, который является частью пакета TCP/IP под названием ICMP. Команда **traceroute** traceroute **traceroute** обычно выполняется, когда нет ответа на команду **ping** ping **ping**.

**Шаг 1**. Проверка физического уровня Наиболее часто используемые команды Cisco IOS для этой цели **show processes cpu**, **show memory** и **show interfaces**

**Шаг 2**. Проверить наличие несогласованных параметров дуплексной связи. Другой распространенной причиной ошибок интерфейса является несогласованный режим дуплекса между обоими концами канала Ethernet. Во многих сетях на базе Ethernet соединения «точка-точка» в настоящее время являются нормой, а концентраторы и связанный с ними полудуплексный режим применяются редко. Используйте команду **show interfaces** _interface_ для диагностики этой проблемы.

**Шаг 3**. Проверьте адресацию в локальной сети. При диагностике проблем со сквозной связью полезно проверить сопоставления между IP-адресами назначения и адресами Ethernet на уровне 2 в отдельных сегментах. Команда **arp** в Windows позволяет отображать и изменять записи в кэше ARP, используемые для хранения IPv4-адресов и их разрешенных физических адресов Ethernet (MAC). Команда Windows **netsh interface ipv6 show neighbor** позволяет вывести список всех устройств, информация о которых в настоящее время находится в таблице соседних устройств. В выходных данных  команды **show ipv6 neighbors** отображается пример таблицы соседей на маршрутизаторе Cisco IOS. Для отображения таблицы MAC-адресов на коммутаторе используйте команду **show mac address-table**.

Другой проблемой, которую следует учитывать при диагностике связи между конечными узлами, является назначение сети VLAN. Используйте команду **arp**, чтобы просмотреть запись для шлюза по умолчанию. Используйте команду **show mac address-table** для проверки таблицы MAC коммутатора. Это может показать, что назначения VLAN не верны.

**Шаг 4**. Проверьте шлюз по умолчанию IPv4 Выходные данные команды **show ip route** Cisco IOS используются для проверки шлюза по умолчанию маршрутизатора. На узле Windows команда **route print** используется для проверки наличия шлюза IPv4 по умолчанию.

В IPv6 шлюз по умолчанию можно настроить вручную либо с помощью автоматической настройки без сохранения состояния (SLAAC), либо с помощью DHCPv6. Команда **show ipv6 route** Cisco IOS используется для проверки маршрута IPv6 по умолчанию на маршрутизаторе. Команда **ipconfig** Windows используется для проверки того, имеет ли PC1 шлюз IPv6 по умолчанию. В выходных данных команды **show ipv6 interface** _interface_ будет указано, включен ли маршрутизатор в качестве маршрутизатора IPv6. Включите маршрутизатор в качестве маршрутизатора IPv6 с помощью  команды **ipv6 unicast-routing**. Чтобы убедиться, что на узле установлен шлюз по умолчанию, используйте команду **ipconfig** на ПК с Microsoft Windows или команду **netstat -r** или **ip route** на Linux и Mac OS X.

**Шаг 5**. Проверка правильного пути Маршрутизаторы в пути принимают решение о маршрутизации на основе информации, содержащейся в таблицах маршрутизации. Используйте команду **show ip route** | **begin Gateway** для таблицы маршрутизации IPv4. Используйте команду **show ipv6 route** для таблицы маршрутизации IPv6.

**Шаг 6**. Проверка транспортного уровня Двумя самыми распространенными проблемами, влияющими на связь на транспортном уровне, являются настройки списков ACL и настройки NAT. Общим средством для тестирования функций транспортного уровня является служебная программа Telnet.

**Шаг 7**. Проверка списков контроля доступа Для отображения содержимого всех списков контроля доступа для IPv4 используйте команду **show ip access-lists**, а содержимого всех ACL для IPv6, настроенных на маршрутизаторе, — команду **show ipv6 access-list**. Проверьте, к какому интерфейсу применен ACL с помощью команды **show ip interfaces**.

**Шаг 8**. Проверьте DNS. Для отображения информации о настройке DNS на коммутаторе или маршрутизаторе используйте команду **show running-config**. Используйте команду **ip host**, чтобы ввести имя, которое будет использоваться вместо IPv4-адреса коммутатора или маршрутизатора, как показано в выходных данных команды.

<!-- 12.6.4 -->
<!-- quiz -->

