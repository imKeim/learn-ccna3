<!-- 14.2.1 -->
## Видео: Форматы данных

Умные устройства — это, по сути, крошечные компьютеры. Чтобы интеллектуальное устройство, например исполнительный механизм, реагировало на изменяющиеся условия, оно должно уметь принимать и интерпретировать информацию с других интеллектуальных устройств, таких как датчик. Эти два устройства должны иметь общий «язык», который называется форматом данных. Общие форматы данных также используют другие устройства в сети.

Нажмите кнопку Воспроизведения в видео, чтобы узнать о форматах данных.

![youtube](https://www.youtube.com/watch?v=2AduRqyW8Qc)

<!-- 14.2.2 -->
## Концепция форматов данных

При обмене данными с людьми возможности отображения этой информации практически безграничны. Например, подумайте, как ресторан может представить меню. Это может быть только текст, маркированный список, фотографии с подписями или без них. Это все разные способы, которыми ресторан может форматировать данные для составления меню. Чем лучше продуманна форма представления информации, тем она понятнее целевой аудитории. Так же и с общими данным между компьютерами. Один компьютер должен поместить данные в формат, понятный другому.

Форматы данных — просто способ хранения и обмена данными в структурированном формате. Один из таких форматов Hypertext Markup Language (HTML). Это стандартный язык разметки для описания структуры веб-страниц, как показано на рисунке.

![](./assets/14.2.2.png)

Распространенные форматы данных, которые используются во многих приложениях, включая автоматизацию сети и программируемость:

* JavaScript Object Notation (JSON), 
* eXtensible Markup Language (XML),
* YAML Ain’t Markup Language (YAML). 

Выбранный формат данных будет зависеть от формата, используемого приложением, инструментом или скриптом. Многие системы смогут поддерживать несколько форматов данных, что дает пользователю возможность выбора.

<!-- 14.2.3 -->
## Правила формата данных

Правила и структура форматов данных такие же, как в программировании и письменных языках. У каждого формата есть определенные характеристики:

* синтаксис: типы используемых скобок, [\], (), {}, использование пробелов или отступов, кавычек, запятых и т. д.;
* как представлены объекты: символы, строки, списки и массивы;
* как представлены пары ключ/значение. Ключ обычно находится слева и идентифицирует или описывает данные. Справа находятся сами данные: символ, строка, число, спискок или данные другого типа.

Поищите в Интернете «найти текущее местоположение МКС». Веб-сайт отслеживает текущее местоположение Международной космической станции. На нем вы можете увидеть, как используются форматы данных и некоторые сходства между ними. Этот сайт содержит ссылку для простого обращения интерфейса прикладного программирования (API) к серверу, который возвращает текущую широту и долготу космической станции вместе с меткой времени UNIX. В следующем примере показана информация, возвращаемая сервером с использованием JavaScript Object Notation (JSON). Информация отображается в необработанном формате. Это может затруднить понимание структуры данных.

```
{"message": "success", "timestamp": 1560789216, "iss_position": {"latitude": "25.9990", "longitude": "-132.6992"}}
```

Поищите в Интернете расширение для браузера «JSONView» или любое другое, которое позволит вам просматривать JSON в более удобочитаемом формате. Объекты данных отображаются в парах ключ/значение. Следующий вывод показывает тот же вывод с использованием JSONView. Пары ключ/значение гораздо проще интерпретировать. В приведенном ниже примере вы можете увидеть ключ — **широту** и его значение **25.9990**.

```
{
	"message": "success",
	"timestamp": 1560789260,
	"iss_position": {
		"latitude": "25.9990",
		"longitude": "-132.6992"
	}
}
```

**Примечание:** JSONView может удалить кавычки с ключа. Кавычки необходимы при кодировании в формате JSON пар ключ/значение.

<!-- 14.2.4 -->
## Сравнение форматов данных

Чтобы увидеть те же данные в формате XML или YAML, поищите в Интернете инструмент преобразования JSON. На этом этапе не так важно понимать детали каждого формата данных, но обратите внимание, как каждый из них использует синтаксис и как представлены пары ключ/значение.

**Формат JSON**

```
{
	"message": "success",
	"timestamp": 1560789260,
	"iss_position": {
		"latitude": "25.9990",
		"longitude": "-132.6992"
	}
}
```

**Формат YAML**

```
message: success
timestamp: 1560789260
iss_position:
    latitude: '25.9990'
    longitude: '-132.6992'
```

**Формат XML**

```
<?xml version="1.0" encoding="UTF-8" ?>
<root>
  <message>success</message>
  <timestamp>1560789260</timestamp>
  <iss_position>
    <latitude>25.9990</latitude>
    <longitude>-132.6992</longitude>
  </iss_position>
</root>
```

<!-- 14.2.5 -->
## Формат данных JSON

JSON — читаемый человеком формат данных, который используют приложения для хранения, передачи и чтения данных. JSON — очень популярный формат, используемый веб-сервисами и API для предоставления общедоступных данных. Его легко анализировать и можно использовать с большинством современных языков программирования, включая Python.

Следующий вывод показывает пример частичного вывода в IOS команды **show interface GigabitEthernet0/0/0** на маршрутизаторе.

**Вывод маршрутизатора**

```
GigabitEthernet0/0/0 is up, line protocol is up (connected)
  Description: Wide Area Network
  Internet address is 172.16.0.2/24
```

Эту же информацию можно представить в формате JSON. Обратите внимание, что каждый объект (каждая пара ключ/значение) представляет собой отдельный фрагмент данных об интерфейсе, включая его имя, описание и то, включен ли интерфейс.

**Вывод JSON**

```
{
    "ietf-interfaces:interface": {
         "name": "GigabitEthernet0/0/0",
         "description": "Wide Area Network",
         "enabled": true,
         "ietf-ip:ipv4": {
             "address": [
                 {
                     "ip": "172.16.0.2",
                     "netmask": "255.255.255.0"
                 }
             ]
          }
    }
}
```

<!-- 14.2.6 -->
## Правила синтаксиса JSON

Некоторые характеристики JSON:

* использует иерархическую структуру и содержит вложенные значения;
* использует фигурные скобки { } для хранения объектов и квадратные скобки \[ \] для хранения массивов;
* данные записываются в виде пар ключ/значение.

В JSON данные, известные как объект, представляют собой одну или несколько пар ключ/значение, заключенных в фигурные скобки { }. Синтаксис для объекта JSON:

* ключи — строки в двойных кавычках " ";
* значения — допустимый тип данных JSON (строка, число, массив, логический, нулевой или другой объект);
* ключи и значения разделяются двоеточием;
* несколько пар ключ/значение внутри объекта разделяются запятыми;
* пробел не имеет значения.

Иногда ключ может содержать более одного значения. Это массив. Массив в JSON — упорядоченный список значений. Характеристики массивов в JSON:

* за ключом следует двоеточие и список значений в квадратных скобках  \[ \];
* массив — упорядоченный список значений;
* массив может содержать несколько типов значений: строка, число, логическое значение, объект или другой массив внутри массива;
* каждое значение в массиве отделяется запятой.

Например, список адресов IPv4 может выглядеть следующим образом. Ключ — “addresses”. Каждый элемент в списке — отдельный объект, разделенный фигурными скобками { }. Объектами являются две пары ключ/значение: адрес IPv4 («ip») и маска подсети («netmask»), разделенные запятой. Массив объектов в списке также разделяется запятой после закрывающей скобки для каждого объекта.

**Список адресов IPv4 в формате JSON**

```
{
  "addresses": [
    {
      "ip": "172.16.0.2",
      "netmask": "255.255.255.0"
    },
    {
      "ip": "172.16.0.3",
      "netmask": "255.255.255.0"
    },
    {
      "ip": "172.16.0.4",
      "netmask": "255.255.255.0"
    }
  ]
}
```

<!-- 14.2.7 -->
## Формат данных YAML

YAML — другой тип читаемого человеком формата данных, используемый приложениями для хранения, передачи и чтения данных. Некоторые характеристики YAML:

* похож на JSON и считается надмножеством JSON;
* минималистский формат, облегчающий чтение и запись;
* использует отступ для определения своей структуры, без использования скобок или запятых.

Например, посмотрите на этот вывод JSON для интерфейса Gigabit Ethernet 2.

**JSON для GigabitEthernet2**

```
{
   "ietf-interfaces:interface": {
      "name": "GigabitEthernet2",
      "description": "Wide Area Network",
      "enabled": true,
      "ietf-ip:ipv4": {
         "address": [
            {
               "ip": "172.16.0.2",
               "netmask": "255.255.255.0"
            },
            {
               "ip": "172.16.0.3",
               "netmask": "255.255.255.0"
            },
            {
               "ip": "172.16.0.4",
               "netmask": "255.255.255.0"
            }
         ]
      }
   }
}
```

Эти же данные в формате YAML легче читать. Подобно JSON, объект YAML представляет собой одну или несколько пар ключ/значение. Они отделяются двоеточием без кавычек. В YAML дефис используется для разделения каждого элемента в списке. Это показано для трех адресов IPv4 в следующем выводе.

**YAML для GigabitEthernet2**

```
ietf-interfaces:interface:
  name: GigabitEthernet2
  description: Wide Area Network
  enabled: true
  ietf-ip:ipv4:
    address:
    - ip: 172.16.0.2
      netmask: 255.255.255.0
    - ip: 172.16.0.3
      netmask: 255.255.255.0
    - ip: 172.16.0.4
      netmask: 255.255.255.0
```

<!-- 14.2.8 -->
## Формат данных XML

XML — еще один тип читаемого человеком формата данных, который используется для хранения, передачи и чтения данных приложениями. Некоторые из характеристик XML:

* похож на стандартизированный язык разметки для создания веб-страниц и веб-приложений HTML;
* самоописательный — заключает данные в связанный набор тегов: **\<tag>data\</tag>**;
* в отличие от HTML, XML не использует предопределенные теги или структуру документа.

Объекты XML — одна или несколько пар ключ/значение, в качестве имени ключа используется начальный тег: **\<key>value\</key>**

Следующий вывод показывает те же данные для GigabitEthernet2, отформатированные как структура данных XML. Обратите внимание, как значения заключены в теги объекта. В этом примере каждая пара ключ/значение находится на отдельной строке, а некоторые строки имеют отступ. Это не обязательно, но сделано для удобства чтения. Список использует повторяющиеся экземпляры **\<tag>\</tag>** для каждого элемента в списке. Элементы в этих повторяющихся экземплярах представляют одну или несколько пар ключ/значение.

**XML для GigabitEthernet2**

```
<?xml version="1.0" encoding="UTF-8" ?>
<ietf-interfaces:interface>
  <name>GigabitEthernet2</name>
  <description>Wide Area Network</description>
  <enabled>true</enabled>
  <ietf-ip:ipv4>
    <address>
      <ip>172.16.0.2</ip>
      <netmask>255.255.255.0</netmask>
    </address>
    <address>
      <ip>172.16.0.3</ip>
      <netmask>255.255.255.0</netmask>
    </address>
    <address>
      <ip>172.16.0.4</ip>
      <netmask>255.255.255.0</netmask>
    </address>
  </ietf-ip:ipv4>
</ietf-interfaces:interface>
```

<!-- 14.2.9 -->
<!-- quiz -->

