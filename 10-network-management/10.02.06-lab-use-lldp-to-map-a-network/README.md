
---

> **ВАЖНО**
> 
> Форма для ответов на вопросы будет доступна только при развертывании лабораторной работы 

---

## Топология

![](./assets/topology.png)

## Таблица адресации

| Устройство | Интерфейс | IP-адрес       | Маска подсети | Интерфейс локальной сети и подключенный сосед |
|------------|-----------|----------------|---------------|-----------------------------------------------|
| Периметр   | G0/0      | 192.168.1.1    | 255.255.255.0 |                                               |
| Периметр   | S0/0/0    |                |               | S0/0/0 — ISP                                  |
|            | SVI       | 192.168.1.2    |               |                                               |
|            | G0/0      | 209.165.200.10 |               | G0/0 - ISP                                    |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |

## Цели

Создать карту сети с помощью LLDP и удаленного доступа по протоколу SSH.

## Общие сведения и сценарий

Старшему администратору необходимо составить сеть удаленного филиала и обнаружить сведения обо всех устройствах. Вы должны задокументировать их имена, IP-адреса и маски подсетей, а также имена физических интерфейсов, с помощью которых сетевые устройства соединены друг с другом.

Для создания карты сети нужно использовать удаленный доступ по протоколу SSH и применить протокол LLDP, чтобы получить сведения о соседних сетевых устройствах. Поскольку LLDP — протокол уровня 2, его можно использовать для сбора сведений об устройствах без IP-адресов. Внесите полученную информацию в таблицу. Кроме того, вам потребуется создать диаграмму топологии сети удаленного филиала Remote Branch Office.

IP-адрес сети удаленного филиала — 209.165.200.10. Учетные данные для локального и удаленного административного доступа:

**Локальная сеть**

Имя пользователя: **admin01**

Пароль: **S3cre7P@55**

**Remote Branch Office Network**

Имя пользователя: **RBOadmin**

Пароль: **S3cre7P@55**

## Инструкции

### Часть 1. Удаленный доступ к сетевым устройствам по протоколу SSH

В первой части вам предстоит удаленно подключиться с Admin-PC к маршрутизатору Edge1, являющемуся шлюзом. С него вам потребуется подключиться к сети удаленного филиала Remote Branch Office по протоколу SSH.

1.  На компьютере Admin-PC откройте интерфейс командной строки.

2.  Подключитесь по протоколу SSH к маршрутизатору, являющемуся шлюзом, которому присвоен IP-адрес 192.168.1.1. Для этого используйте следующие учетные данные: имя пользователя — **admin01**, пароль — **S3cre7P@55**.

    ```
    PC> ssh –l admin01 192.168.1.1
    Open
    Password:

    Edge#
    ```

    **Примечание.** Обратите внимание: вы попадаете сразу в исполнительский режим EXEC. Это связано с тем, что учетной записи пользователя admin01 предоставлены разрешения уровня 15.

3.  Маршрутизатор **Edge** ранее был настроен на использование CDP. Коммутатор **S1** уже настроен на использование LLDP. Выполните команду **show cdp** , чтобы убедиться, что CDP активен. Отключите его, выполнив следующую команду:

    ```
    Edge(config)# no cdp run
    ```

4.  **LLDP** может быть настроен для передачи и приема на определенном интерфейсе. Настройте **Edge** таким образом, чтобы он получал сообщения LLDP от **S1**, но не отправлял сообщения **S1** в целях безопасности. Включите **LLDP**.

    ```
    Edge(config)# lldp run
    Edge(config)# int g0/0
    Edge(config-if)# no lldp transmit
    Edge (config-if) # exit
    ```

5.  Используйте команду **show lldp neighbors** , чтобы убедиться, что **Edge** получает сообщения от **S1** .

6.  Подключайтесь к **S1** с помощью SSH от **Edge** маршрутизатора, используя учетные данные **admin01**. Выполните команду **show lldp neighbors**. Обратите внимание, что **S1** не получил информацию от **Edge** .

    ```
    Edge# ssh –l admin01 192.168.1.2
    Password:

    S1> show lldp neighbors
    S1> exit
    ```

7.  Выйдите из соединения с S1, чтобы вернуться к интерфейсу командной строки пограничного маршрутизатора. Выполните команды **show ip interface brief** и **show interfaces**, чтобы отобразить сведения о физических интерфейсах маршрутизатора Edge1, соответствующих IP-адресах и масках подсетей, а затем внесите необходимую информацию в таблицу адресации.

    ```
    Edge# show ip interface brief
    Edge# show interfaces
    ```

8.  В сеансе с пограничным маршрутизатором подключитесь с помощью SSH к удаленному RBO Office по адресу 209.165.200.10 с именем пользователя **RBOadmin** и тем же паролем, что и для admin01.

    ```
    Edge# ssh –l RBOadmin 209.165.200.10
    Password:

    RBO-Edge#
    ```

    Вопрос: Какие из отсутствовавших ранее сведений можно внести в таблицу адресации после подключения к сети удаленного филиала Remote Branch Office по адресу 209.165.200.10?

### Часть 2. Получение сведений о соседних устройствах с помощью протокола LLDP

Вы удаленно подключены к маршрутизатору Branch-Edge. Приступите к сбору сведений о подключенных сетевых устройствах с помощью протокола LLDP.

1.  Выполните команды **show ip interface brief** и **show interfaces**, чтобы отобразить сведения о сетевых интерфейсах маршрутизатора RBO-Edge, соответствующих IP-адресах и масках подсетей. Внесите в таблицу адресации отсутствующие сведения для создания карты сети.

2. Чтобы обеспечить безопасность, протокол CDP следует использовать только при необходимости, поэтому, возможно, потребуется его включить. Выполните команду **show lldp**, чтобы проверить состояние протокола.

    ```
    RBO-Edge# show lldp
    % LLDP is not enabled
    ```

3. Вам необходимо включить протокол CDP, однако широковещательную рассылку информации при этом рекомендуется организовать только для внутренних сетевых устройств, а не для внешних сетей. Узнайте, какой интерфейс подключен к Интернету, выполнив команду **show ip interface brief**. Включите протокол LLDP и полностью отключите его на интерфейсе, подключенном к Интернету.

    ```
    RBO-Edge# configure terminal
    RBO-Edge(config)# lldp run
    RBO-Edge(config)# interface g0/0
    RBO-Edge(config-if)# no lldp transmit
    RBO-Edge(config-if)# no lldp receive
    RBO-Edge (config-if) # exit
    ```

4. Выполните команду **show lldp neighbors**, чтобы найти соседние сетевые устройства.

    **Примечание.** LLDP будет показывать только подключенные устройства, на которых также работает этот же протокол.

    ```
    RBO-Edge# show lldp neighbors
    ```

    Вопрос: Обнаружено ли соседнее сетевое устройство? К какому типу оно относится? Какое имя ему присвоено? Через какой интерфейс подключено это устройство? Указан ли его IP-адрес? Внесите эти сведения в таблицу адресации.

5. Используйте команду **show ip route** для определения адреса устройства, найденного с помощью команды **show lldp neighbors** . Основываясь на сведениях о локальном адресе в таблице маршрутизации и длине префикса сети, определите адрес соседа.

6. Чтобы найти дополнительную информацию от соседнего устройства, используйте команду **show lldp neighbors detail** :

    ```
    RBO-Edge# show lldp neighbors detail
    ```

    - ответьте на вопрос №1

    **Примечание. Текущая версия Packet Tracer не предоставляет адрес управления соседнего устройства. В этом задании несколько адресов соседних устройств были предоставлены в таблице адресации.**

7. Подключайтесь к соседнему устройству с помощью SSH, чтобы обнаружить другие по соседству.

    **Примечание.** Для подключения по протоколу SSH используйте те же имя пользователя и пароль, что и при подключении к сети удаленного филиала Remote Branch Office.

    ```
    RBO-Edge# ssh –l RBOadmin <the ip address of the neighbor device>
    ```

    - ответьте на вопрос №2

8. Вы удаленно подключены к следующему соседу. Выполните команды **show cdp neighbors** и **show cdp neighbors detail**, чтобы найти другие подключенные соседние устройства.

    Вопрос: К каким типам сетевых устройств относятся соседи этого устройства? Внесите сведения о новых обнаруженных устройствах в таблицу адресации. Укажите их имена хостов, интерфейсы и IP-адреса.

    Добавьте новое имя устройства рядом с записью SVI для адреса 192.168.4.131.

9. Подключитесь к SVI для адреса 192.168.4.131, используя SSH и учетные данные, использовавшиеся ранее. Если появится запрос на ввод секретного пароля, используйте тот же пароль, что и для **RBOAdmin**. Выполните команды **show cdp neighbors** и **show cdp neighbors detail**, чтобы найти другие подключенные соседние устройства.

    Вопрос: К каким типам относятся соседние устройства? Внесите сведения о новых обнаруженных устройствах в таблицу адресации. Укажите их имена хостов, интерфейсы и IP-адреса.

    Поместите новое имя устройства рядом с записью SVI для адреса 192.168.4.133.

10. Подключитесь к SVI для адреса 192.168.4.133, используя SSH и учетные данные, использовавшиеся ранее. Выполните команду **show lldp**, вы должны получить сообщение:

    ```
    % LLDP is not enabled
    ```

    Включите **lldp** глобально, как в шаге 3. Нет необходимости настраивать параметры **передачи** или **получения**, они активированы по умолчанию. Выполните команды **show cdp neighbors** и **show cdp neighbors detail**, чтобы найти другие подключенные соседние устройства.

    Вопрос: К каким типам относятся соседние устройства? Внесите сведения о новых обнаруженных устройствах в таблицу адресации. Укажите их имена хостов, интерфейсы и IP-адреса. Возможно, будет полезно повторно подключиться к ранее обнаруженным устройствам, чтобы отобразить соседей еще раз, чтобы завершить всю таблицу адресации теперь, когда все устройства настроены для LLDP.

11. Создайте топологию сети удаленного филиала Remote Branch Office, используя сведения, которые были получены с помощью протокола LLDP.

<!-- [Скачать файл Packet Tracer для локального запуска](./assets/10.2.6-lab.pka) -->
