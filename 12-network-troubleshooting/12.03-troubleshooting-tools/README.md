<!-- 12.3.1 -->
## Программные средства для устранения неполадок

Как известно, сети состоят из программной и аппаратной части. У них свои соответствующие инструменты для устранения неполадок, которые рассматриваются в этом разделе.

Благодаря разнообразному программному и аппаратному инструментарию поиск и устранение неполадок упрощается. Инструменты помогают собрать и проанализировать симптомы проблем. Эти средства часто выполняют функции наблюдения и создания отчетов, которые можно использовать для формирования базовых показателей сети.

**Инструментарий системы управления сетью**

Система управления сетями (NMS) включает в себя средства мониторинга, настройки и устранения неисправностей на уровне устройств. Их можно использовать для анализа и устранения сетевых проблем. ПО для наблюдения за сетью позволяет графически отображать физический вид сетевых устройств, благодаря чему диспетчеры могут отслеживать удаленные устройства постоянно и в автоматическом режиме. ПО для управления позволяет формировать статистику, динамическую информацию об их состоянии и о настройке для ключевых сетевых устройств. Поищите в Интернете «NMS Tools» для получения дополнительной информации.

**Базы знаний**

Базы знаний поставщиков сетевых устройств, доступные в оперативном режиме, стали незаменимыми источниками информации. Объединив возможности баз знаний поставщиков с поисковыми системами Интернета, сетевой администратор получает доступ ко множеству ресурсов с описанием практического опыта.

**Средства формирования базовых показателей**

Множество средств автоматизируют документирование сети и формируют базовые показатели. Они позволяют выполнять распространенные задачи. Например, рисовать схемы сетей, обеспечивать актуальность документации по программному обеспечению и оборудованию, а также экономно измерять использование базовой пропускной способности. Поищите в Интернете «Инструменты мониторинга производительности сети» для получения дополнительной информации.

<!-- 12.3.2 -->
## Анализаторы протоколов

Анализаторы протоколов полезны для анализа содержимого пакета при его прохождении через сеть. Этот инструмент декодирует различные уровни протоколов в записанном кадре и представляет полученные сведения в удобном для восприятия формате. На рисунке показан скриншот анализатора протоколов Wireshark.

![](./assets/12.3.2.jpg)

<!--
На рисунке показан скриншот анализатора протокола Wireshark. На экране изображен захват пакетов DHCP, отправляемых между устройством и сервером. Пакеты в примере — DHCP Discover, DHCP Offer и DHCP Request.
-->

Анализатор протоколов позволяет отображать различную информацию: физическую среду, канал передачи данных, протокол и описание для каждого кадра. Большинство анализаторов фильтруют трафик по определенным критериям, что позволяет записывать и собирать, например, весь трафик, поступающий на конкретное устройство или из него. Анализаторы протоколов, такие как Wireshark, упрощают процессы отладки, связанные с производительностью сети. Очень важно иметь хорошее представление о TCP/IP и о том, как использовать анализатор для проверки информации на каждом уровне.

<!-- 12.3.3 -->
## Средства поиска и устранения неполадок аппаратного обеспечения

Существует несколько типов средств поиска и устранения неполадок с аппаратным обеспечением.

**Цифровой мультиметр**

Цифровые мультиметры — универсальные цифровые измерительные приборы (DMM), например Fluke 179, показанный на рис. 1. Они позволяют измерять электрические значения напряжения, тока и сопротивления.

При отладке сети большинство тестов с мультиметром — это измерение напряжения питания и проверка наличия питания на сетевых устройствах.

**Кабельные тестеры**

Кабельные тестеры — это специализированные портативные устройства, предназначенные для проверки различных кабелей передачи данных. На рисунке показан сетевой автоматический тестер Fluke LinkRunner AT.

Тестеры можно использовать для обнаружения оборванных проводов, неправильной разводки, коротких замыканий и неправильно спаренных соединений. Эти устройства могут представлять собой тестеры кабелей и рефлектометры для кабельных линий (time-domain reflectometer, TDR) разной стоимости. Рефлектометры TDR определяют расстояние до места разрыва кабеля. Они посылают сигналы и ждут отраженный сигнал. Время между моментом отправки сигнала и его приемом можно преобразовать в расстояние. Приборы для проверки кабелей данных обычно включают функцию TDR. TDR, используемые для тестирования оптоволоконных кабелей, называются оптическими рефлектометрами (OTDR).

**Анализатор кабельных линий**

Анализаторы кабелей, например Fluke DTX, представляют собой многофункциональные портативные устройства, которыми тестируют и сертифицируют медные и оптоволоконные кабели на соответствие различным применениям и стандартам.

Более сложные средства позволяют выполнять более продвинутый поиск и устранение неполадок, например: определять расстояние до дефекта, который ухудшает уровень производительности на ближнем конце (NEXT) или создает возвратные потери (RL), определять действия по исправлению, графически отображать поведение перекрестных помех и импеданса. К анализаторам кабелей обычно прилагается специальное ПО для ПК. После сбора рабочие данные с портативного устройства можно выгрузить, чтобы сетевой администратор обновил отчеты.

**Портативный сетевой анализатор**

Портативные анализаторы сетей — это переносные устройства, например Fluke OptiView, для поиска и устранения отказов в коммутируемых сетях и сетях VLAN.

Подключив анализатор сети в любой точке, технический специалист может определить порт коммутатора, к которому подключено устройство, а также среднюю и пиковую нагрузку на данный порт. Анализатор также можно использовать для обнаружения настройки сети VLAN, определения основных источников трафика, анализа сетевого трафика и просмотра сведений об интерфейсах. Как правило, такое устройство может выводить данные на ПК, где установлено ПО для наблюдения за сетью, чтобы анализировать и устранять неполадки.

<!-- 12.3.4 -->
## Сервер Syslog как средство устранения неполадок 

Syslog — это простой протокол, используемый устройством IP (клиентом Syslog) и позволяющий отправлять текстовые журнальные сообщения на другое устройство IP (сервер Syslog). Он определен в RFC 5424.

Функция регистрации крайне важна, чтобы обеспечить безопасность и отладить сеть. Устройства Cisco могут регистрировать информацию об изменении настройки, нарушениях списков контроля доступа, состоянии интерфейсов и других событиях. Устройства Cisco могут отправлять журнальные сообщения на различные объекты. Сообщения о событиях могут отправляться в следующие места:

* **Консоль** — ведение журнала консоли включено по умолчанию. Сообщения записываются на консоль. Их можно просматривать при изменении или тестировании маршрутизатора либо коммутатора с помощью ПО эмуляции терминала (при наличии подключения к консольному порту сетевого устройства).
* **Линии терминала** — включенные сеансы EXEC (привилегированный режим) можно настроить на получение журнальных сообщений на любые линии терминала. По аналогии с регистрацией на консоли режим регистрации этого типа не сохраняется сетевым устройством, поэтому может применяться только пользователем на линии.
* **Запись в буфер** — немного более полезное средство поиска и устранения неполадок, так как записи журналов некоторое время хранятся в памяти. Однако после перезагрузки устройства журнальные сообщения удаляются.
* **Ловушки SNMP** — на маршрутизаторах и других устройствах можно предварительно настроить несколько пороговых значений. События маршрутизатора (например, превышение порогового значения) могут обрабатываться маршрутизатором и перенаправляться в виде SNMP-ловушек на внешнюю станцию управления SNMP. Ловушки SNMP представляют собой эффективное средство регистрации событий безопасности, для которого требуется настраивать и технически сопровождать систему SNMP.
* **Syslog** — маршрутизаторы и коммутаторы Cisco можно настроить на перенаправление журнальных сообщений на внешнюю службу syslog. Служба может находиться на любом количестве серверов или рабочих станций, включая системы под управлением ОС Microsoft Windows и Linux. Syslog — наиболее популярное средство регистрации сообщений, которое обеспечивает долговременное хранение журнальных сообщений и централизованно хранит сообщения от всех маршрутизаторов.

Журнальные сообщения Cisco IOS могут быть отнесены к одному из 8 уровней как показано в таблице.

<table>
  <tr>
    <td></th>
    <td><b>Уровень</b></th>
    <td><b>Ключевое слово</b></th>
    <td><b>Описание</b></th>
    <td><b>Определение</b></th>
  </tr>
  <tr>
    <td rowspan="5"><b>Наивысший уровень</b></td>
    <td>0</td>
    <td>Emergencies</td>
    <td>Систему нельзя использовать</td>
    <td>LOG_EMERG</td>
  </tr>
  <tr>
    <td>1</td>
    <td>Alerts</td>
    <td>Требуется немедленное действие</td>
    <td>LOG_ALERT</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Critical</td>
    <td>Существуют критические состояния</td>
    <td>LOG_CRIT</td>
  </tr>
  <tr>
    <td>3</td>
    <td>Error</td>
    <td>Существуют состояния ошибки</td>
    <td>LOG_ERR</td>
  </tr>
  <tr>
    <td>4</td>
    <td>Warnings</td>
    <td>Существуют состояния предупреждения</td>
    <td>LOG_WARNING</td>
  </tr>
  <tr>
    <td rowspan="3"><b>Самый низкий уровень</b></td>
    <td>5</td>
    <td>Notifications</td>
    <td>Нормальное состояние, но требующее внимания</td>
    <td>LOG_NOTICE</td>
  </tr>
  <tr>
    <td>6</td>
    <td>Informational</td>
    <td>Только информационные сообщения</td>
    <td>LOG_INFO </td>
  </tr>
  <tr>
    <td>7</td>
    <td>Debugging</td>
    <td>Сообщения отладки</td>
    <td>LOG_DEBUG</td>
  </tr>
</table>

Чем меньше номер, тем выше уровень серьезности. По умолчанию все сообщения с уровней 0–7 регистрируются на консоли. Хотя возможность просмотра журналов на центральном сервере Syslog довольно полезна при поиске и устранении неполадок, искать в большом объеме данных будет трудно. Команда **logging trap** _level_ позволяет ограничивать сообщения, отправляемые на сервер Syslog, в зависимости от важности важности. Уровень — это имя или номер уровня серьезности. Регистрируются только сообщения, равные или численно ниже указанного уровня.

В выводе команды системные сообщения с уровня 0 (чрезвычайные ситуации) по 5 (уведомления) отправляются на сервер Syslog по адресу 209.165.200.225.

```
R1(config)# logging host 209.165.200.225 
R1(config)# logging trap notifications 
R1(config)# logging on
R1(config)#
```

<!-- 12.3.5 -->
<!-- quiz -->

