## Топология

![](./assets/topology.png)

## Таблица адресации

| Устройство | Интерфейс | IP-адрес       | Маска подсети | Интерфейс локальной сети и подключенный сосед |
|------------|-----------|----------------|---------------|-----------------------------------------------|
| Edge1      | G0/0      | 192.168.1.1    | 255.255.255.0 | G0/1 — S1                                     |
| Edge1      | S0/0/0    |                |               | S0/0/0 — ISP                                  |
|            | S0/0/1    | 209.165.200.10 |               | S0/0/1 — ISP                                  |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |
| &nbsp;     |           |                |               |                                               |

## Задачи

Создайте карту сети с помощью протокола CDP и удаленного доступа по протоколу SSH.

## Общие сведения/сценарий

Старший администратор сети поручил вам создать карту сети удаленного филиала Remote Branch Office и узнать имя недавно установленного коммутатора, на котором необходимо настроить IP-адрес. Ваша задача заключается в том, чтобы создать карту сети филиала. Вы должны задокументировать имена всех сетевых устройств, их IP-адреса и маски подсетей, имена физических интерфейсов, посредством которых сетевые устройства соединены друг с другом, а также имя коммутатора, которому не присвоен IP-адрес.

Для создания карты сети нужно использовать удаленный доступ по протоколу SSH и применить протокол Cisco Discovery Protocol (CDP) для получения сведений о соседних сетевых устройствах. Поскольку протокол CDP является протоколом уровня 2, его можно использовать для сбора сведений об устройствах, которым не назначены IP-адреса. Полученную информацию следует внести в таблицу адресации. Кроме того, потребуется создать диаграмму топологии сети удаленного филиала Remote Branch Office.

Учетные данные для локального и удаленного административного доступа:

**Локальная сеть**

Имя пользователя: **admin01**

Пароль: **S3cre7P@55**

**Сеть филиала**

Имя пользователя: **branchadmin**

Пароль: **S3cre7P@55**

## Инструкции

### Часть 1. Удаленный доступ к сетевым устройствам по протоколу SSH

В первой части вам предстоит удаленно подключиться с Admin-PC к маршрутизатору Edge1, являющемуся шлюзом. Затем вам потребуется подключиться с маршрутизатора Edge1 к сети удаленного филиала Remote Branch Office по протоколу SSH.

1.  На компьютере Admin-PC откройте интерфейс командной строки.

2.  Подключитесь по протоколу SSH к маршрутизатору, являющемуся шлюзом, которому присвоен IP-адрес 192.168.1.1. Для этого используйте следующие учетные данные: имя пользователя — **admin01**, пароль — **S3cre7P@55**.

    ```
    PC> ssh –l admin01 192.168.1.1
    Open
    Password:

    Edge1#
    ```

    **Примечание.** Обратите внимание: вы попадаете сразу в исполнительский режим EXEC. Это связано с тем, что учетной записи пользователя admin01 предоставлены разрешения уровня 15.

3.  Выполните команды **show ip interface brief** и **show interfaces**, чтобы отобразить сведения о физических интерфейсах маршрутизатора Edge1, соответствующих IP-адресах и масках подсетей, а затем внесите необходимую информацию в таблицу адресации.

4.  С Edge1 подключитесь по протоколу SSH к сети удаленного филиала Remote Branch Office по адресу 209.165.200.10, указав имя пользователя **branchadmin** и предыдущий пароль:

    ```
    Edge1# ssh –l branchadmin 209.165.200.10
    Open
    Password:

    Branch-Edge#
    ```

    Вопрос: Какие из отсутствовавших ранее сведений можно внести в таблицу адресации после подключения к сети удаленного филиала Remote Branch Office?

### Часть 2. Получение сведений о соседних устройствах с помощью протокола CDP

Вы удаленно подключены к маршрутизатору Branch-Edge. Приступите к сбору сведений о подключенных сетевых устройствах с помощью протокола CDP.

1.  Выполните команды **show ip interface brief** и **show interfaces**, чтобы отобразить сведения о сетевых интерфейсах маршрутизатора Branch-Edge, соответствующих IP-адресах и масках подсетей. Внесите в таблицу адресации отсутствующие сведения, необходимые для создания карты сети.

    ```
    Branch-Edge# show ip interface brief
    Branch-Edge# show interfaces
    ```

2.  В целях обеспечения безопасности протокол CDP следует использовать только в случае необходимости, поэтому, возможно, потребуется включить CDP. Выполните команду **show cdp**, чтобы отобразить состояние протокола.

    ```
    Branch-Edge# show cdp
    % CDP is not enabled
    ```

3.  Вам необходимо включить протокол CDP, однако широковещательную рассылку информации CDP при этом рекомендуется организовать только для внутренних сетевых устройств, а не для внешних сетей. Для этого включите протокол CDP, а затем отключите CDP на интерфейсе S0 / 0/1.

    ```
    Branch-Edge# configure terminal
    Branch-Edge(config)# cdp run
    Branch-Edge(config)# interface s0/0/1
    Branch-Edge(config-if)# no cdp enable
    Branch-Edge(config-if)# exit
    ```

4.  Выполните команду **show cdp neighbors**, чтобы найти соседние сетевые устройства.

    **Примечание.** Протокол CDP позволяет отобразить только те подключенные устройства Cisco, на которых так же включен протокол CDP.

    ```
    Branch-Edge# show cdp neighbors
    ```

    Вопрос: Обнаружено ли соседнее сетевое устройство? К какому типу устройств оно относится? Какое имя ему присвоено? Через какой интерфейс подключено это устройство? Указан ли IP-адрес устройства? Внесите эти сведения в таблицу адресации.

    Для получения обновлений CDP может потребоваться некоторое время. Если вы не видите выходных данных команды, нажмите кнопку Fast Forward Time несколько раз.

5.  Выполните команду **show cdp neighbors detail**, чтобы отобразить IP-адрес соседнего устройства, и внесите эти данные в таблицу адресации:

    ```
    Branch-Edge# show cdp neighbors detail
    ```

    Вопрос: Какая еще потенциально конфиденциальная информация содержится в результатах выполнения команды, помимо IP-адреса соседнего устройства?

    **Введите ваш ответ здесь.**

6. Теперь, когда вам известен IP-адрес соседнего устройства, вам необходимо подключиться к нему по протоколу SSH, чтобы найти другие соседствующие с ним устройства.

    **Примечание.** Для подключения по протоколу SSH используйте те же имя пользователя и пароль, которые использовались при подключении к сети удаленного филиала Remote Branch Office.

    ```
    Branch-Edge# ssh –l branchadmin <the ip address of the neighbor device>
    ```

    Вопрос: Какие сведения отображаются в командной строке после успешного подключения по протоколу SSH?

    **Введите ваш ответ здесь.**

7. Вы удаленно подключены к следующему соседу. Выполните команды **show cdp neighbors** и **show cdp neighbors detail**, чтобы найти другие подключенные соседние устройства.

    Вопрос: К каким типам сетевых устройств относятся соседи этого устройства? Внесите сведения о новых обнаруженных устройствах в таблицу адресации. Укажите их имена хостов, интерфейсы и IP-адреса.

8. Продолжите поиск новых сетевых устройств, используя подключение по протоколу SSH и команды show протокола CDP. Наконец, вы достигли конца сети, и больше нет устройств для обнаружения.

    Вопрос: Какое имя присвоено коммутатору в сети, которому не назначен IP-адрес?

    **Введите ваш ответ здесь.**

9. Создайте топологию сети удаленного филиала Remote Branch Office, используя сведения, которые были получены с помощью протокола CDP.

[Скачать файл Packet Tracer для локального запуска](./assets/10.1.5-packet-tracer---use-cdp-to-map-a-network_ru-RU.pka)
