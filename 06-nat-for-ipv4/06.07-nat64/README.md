<!-- 6.7.1 -->
## NAT для IPv6?

Поскольку многие сети используют как IPv4, так и IPv6, должен быть способ использовать IPv6 с NAT. В этом разделе описывается, как IPv6 может быть интегрирован с NAT. Протокол IPv6 с 128-битовым адресом предоставляет 340 ундециллионов адресов. Таким образом, адресное пространство не является проблемой. Протокол IPv6 был разработан, чтобы устранить необходимость в NAT для IPv4 с его преобразованием между публичными и частными IPv4-адресами. Однако IPv6 включает собственное частное адресное пространство IPv6, уникальные локальные адреса (ULAs).

Уникальные локальные IPv6-адреса (unique local addresses, ULA) похожи на частные адреса RFC 1918 в IPv4, но при этом существенно отличаются от них. Адреса ULA предназначены только для локальной связи внутри сайта. Адреса ULA не предназначены для предоставления дополнительного адресного пространства IPv6 или обеспечения уровня безопасности.

IPv6 обеспечивает преобразование протокола между IPv4 и IPv6, известный как NAT64.

<!-- 6.7.2 -->
## NAT64

NAT для IPv6 используется в совсем другом контексте, нежели NAT для IPv4. Разнообразные варианты NAT для IPv6 используются с целью предоставления прозрачного доступа между сетями, в которых используется только протокол IPv6, и сетями, в которых используется только протокол IPv4, как показано на рисунке. NAT для IPv6 не применяется для преобразования частных IPv6-адресов в глобальные IPv6-адреса.

![](./assets/6.7.2.png)
<!-- /courses/ensa-dl/ae8e8c86-34fd-11eb-ba19-f1886492e0e4/aeb54e66-34fd-11eb-ba19-f1886492e0e4/assets/c6428c80-1c46-11ea-af56-e368b99e9723.svg -->

<!--
На рисунке изображено преобразование NAT64 или IPv6 NAT. Роутер с надписью NAT64 подключен к Интернету IPv4, IPv6 и сети только IPv6. Собственный поток трафика IPv6 отображается в сетях IPv6, в то время как поток транслярованного трафика NAT64 отображается для сети IPv4.
-->

В идеале, IPv6 должен по возможности использоваться в чистом виде. То есть когда устройства IPv6 взаимодействуют друг с другом по сетям IPv6. Организация IETF разработала несколько методов перехода для различных сценариев перехода от IPv4 к IPv6, включая использование двойного стека, туннелирование и трансляцию адресов.

Двойной стек применяется, когда устройства запускают набор протоколов и для IPv4, и для IPv6. Туннелирование для IPv6 — это процесс инкапсуляции пакетов IPv6 в пакеты IPv4. Данный метод позволяет передавать пакет IPv6 по сети, в которой используется только протокол IPv4.

NAT для IPv6 следует использовать не как долгосрочную стратегию, а лишь как временный механизм, помогающий перейти с IPv4 на IPv6. Со временем появилось несколько типов NAT для IPv6, включая NAT-PT (Network Address Translation-Protocol Translation, преобразование сетевых адресов — преобразование протоколов). Организация IETF признала технологию NAT-PT устаревшей и порекомендовала использовать ее замену — NAT64. NAT64 не рассматривается в рамках настоящего учебного курса.

