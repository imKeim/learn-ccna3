<!-- 13.3.1 -->
## Гипервизоры типа 1

В предыдущей теме вы узнали о принципах работы виртуализации. В этом разделе рассматривается инфраструктура виртуальной сети.

В гипервизорах типа 1 используется подход bare metal (без ОС). Он называется так, потому что гипервизоры устанавливаются непосредственно на аппаратную часть. Их обычно используют на серверах предприятия и сетевых устройствах центра обработки данных.

Гипервизоры типа 1 устанавливают непосредственно на физическом сервере или сетевом оборудовании. После этого на него устанавливают экземпляры ОС, как показано на рисунке. У гипервизоров типа 1 прямой доступ к аппаратным ресурсам, поэтому они эффективнее размещенных архитектур, отличаются повышенной масштабируемостью, производительностью и надежностью.

![](./assets/13.3.1.png)
<!-- /courses/ensa-dl/ae8eb398-34fd-11eb-ba19-f1886492e0e4/aeb65fdc-34fd-11eb-ba19-f1886492e0e4/assets/c71286b1-1c46-11ea-af56-e368b99e9723.svg -->

<!--
На рисунке показан гипервизор типа 1 на сервере. Начиная снизу, у сервера аппаратное обеспечение с гипервизором сверху, от него ветвятся 3 операционные системы: ОС Windows, ОС Linux и ОС Unix.
-->

<!-- 13.3.2 -->
## Установка виртуальной машины на гипервизоре

После установки гипервизора типа 1 и перезагрузки сервера на экране отображаются только основные сведения, такие как версия ОС, объем ОЗУ и IP-адрес. На данном этапе создать экземпляр операционной системы нельзя. Для управления гипервизорами требуется консоль управления». Это ПО позволяет управлять несколькими серверами, использующими один гипервизор. Консоль управления может автоматически объединять, включать и выключать их по мере необходимости.

Допустим, у Сервера 1 на рисунке остается мало ресурсов. Чтобы предоставить их, консоль управления переносит экземпляр Windows на гипервизор на Сервер 2. Консоль управления также может быть запрограммирована с пороговыми значениями, которые автоматически запускают перемещение.

![](./assets/13.3.2-1.png)
<!-- /courses/ensa-dl/ae8eb398-34fd-11eb-ba19-f1886492e0e4/aeb65fdc-34fd-11eb-ba19-f1886492e0e4/assets/c71322f1-1c46-11ea-af56-e368b99e9723.svg -->

<!--
На рисунке показаны 2 сервера. Начиная снизу, у сервера 1 аппаратное обеспечение с гипервизором #1 сверху, от него ветвятся три операционные системы: ОС Windows, ОС Linux и ОС Unix. Начиная снизу, у сервера 2 аппаратное обеспечение с гипервизором #2 сверху, от него ответвляется ОС Windows. Стрелка изображает ОС Windows, перемещаемую с сервера 1 на сервер 2.
-->

Консоль управления обеспечивает восстановление после аппаратного сбоя. При выходе из строя серверного компонента консоль управления автоматически переносит виртуальную машину на другой сервер. Консоль управления для системы Cisco UCS показана на рисунке. Cisco UCS Manager управляет множеством серверов, а также выделяет ресурсы для тысяч виртуальных машин.

![](./assets/13.3.2-2.jpg)

<!--
На рисунке показана консоль управления Cisco Unified Computing System (UCS) Manager. В боковом меню менеджер показывает различные серверы. На рисунке выбран сервер 1, отображающий сводку неисправностей, состояние, свойства и физический дисплей.
-->

Некоторые консоли управления также позволяют серверу настраивать переподписку ресурсов. Она возникает, когда несколько установленных экземпляров ОС занимают места больше, чем объем физической памяти на сервере. Например, если на сервере 16 Гбайт ОЗУ, а администратор создает четыре экземпляра операционной системы, каждому из которых выделено 10 Гбайт ОЗУ. Такой тип выделения ресурсов используется достаточно часто, поскольку все четыре экземпляра операционной системы очень редко одновременно нуждаются во всем объеме памяти.

<!-- 13.3.3 -->
## Сложность виртуализации сети

Виртуализация серверов скрывает ресурсы (например, количество и идентификаторы физических серверов, процессоров и ОС) от пользователей. В этом случае возникают проблемы, когда центр обработки данных использует традиционные сетевые архитектуры.

Например, виртуальные локальные сети (VLAN), используемые виртуальными машинами, должны назначаться тому же порту коммутатора, что и физический сервер, на котором работает гипервизор. Однако виртуальные машины могут переноситься, и у администратор должен иметь возможность добавлять, удалять и изменять сетевые ресурсы и профили. Этот процесс будет ручным и трудоемким с традиционными сетевыми коммутаторами.

Другая проблема в том, что потоки трафика значительно отличаются от традиционной модели типа «клиент-сервер». Как правило, у центра обработки данных значительный объем трафика, которым обмениваются виртуальные серверы, такие как UCS, показанные на рисунке. Эти потоки называются движением Восток-Запад и со временем могут изменяться в местоположении и интенсивности. Трафик Север-Юг происходит между распределением и основным слоями. Он обычно предназначен для удаленных местоположений, таких как другой центр обработки данных, другие поставщики облачных услуг или Интернет.

![](./assets/13.3.3.png)
<!-- /courses/ensa-dl/ae8eb398-34fd-11eb-ba19-f1886492e0e4/aeb65fdc-34fd-11eb-ba19-f1886492e0e4/assets/c713bf30-1c46-11ea-af56-e368b99e9723.svg -->

<!--
На рисунке показаны трафик Север-Юг и Восток-Запад в центре обработки данных, обмен которыми осуществляется между виртуальными серверами. На рисунке приведена топология филиалов. Вверху находится облако, помеченное вне узла — это два маршрутизатора брандмауэра на уровне ядра. Маршрутизаторы связываются с двумя коммутаторами Nexus на уровне распространения с избыточными каналами. Вне площадки, маршрутизаторы и коммутаторы помечены как движение Север-Юг. Филиалы от коммутаторов уровня распределения — это четыре коммутатора Nexus на уровне доступа с избыточными связями. У каждого коммутатора уровня доступа три связи с отдельными серверами UCS. В нижней части топологии находятся стрелки, идущие влево и вправо по горизонтали, обозначенные движением Восток-Запад. 
-->

Динамический постоянно меняющийся трафик требует гибкого подхода к управлению сетевыми ресурсами. Существующие сетевые инфраструктуры могут реагировать на меняющиеся требования, связанные с управлением потоками трафика, с помощью механизмов качества обслуживания (QoS) и конфигураций уровня безопасности для отдельных потоков. Однако на крупных предприятиях, использующих оборудование от различных поставщиков, при добавлении каждой новой виртуальной машины необходимые изменения конфигурации могут занимать очень много времени.

Сетевая инфраструктура также может пользоваться преимуществами виртуализации. Сетевые функции можно виртуализироввать. Каждое сетевое устройство может быть разделено на несколько виртуальных устройств, которые работают независимо. Примеры включают субинтерфейсы, виртуальные интерфейсы, VLAN и таблицы маршрутизации. Виртуализированная маршрутизация называется виртуальной маршрутизацией и переадресацей (VRF - virtual routing and forwarding). 

Как виртуализируется сеть? Ответ в том, как именно сетевое устройство работает, используя уровень передачи данных и уровень управления, что обсуждается в следующем разделе.

<!-- 13.3.4 -->
<!-- quiz -->

